<?xml version="1.0"?>
<launch>
	<arg name="camera" default="xtion"/>
	<arg name="camera_rgb" default="$(arg camera)/rgb"/>
	<arg name="image_rect_suffix" default="image_rect_color"/>

	<arg name="point_cloud_topic" default="$(arg camera)/depth_registered/points"/>
	<arg name="camera_frame" default="$(arg camera)_rgb_optical_frame"/>
	<arg name="surface_frame" default="surface"/>

	<include file="$(find tams_bartender_recognition)/launch/recognition_pipeline.launch">
		<arg name="always_enabled" value="false"/>
		<arg name="point_cloud_topic" value="$(arg point_cloud_topic)"/>
		<arg name="surface_frame" value="$(arg surface_frame)"/>
	</include>

	<node pkg='tams_bartender_recognition' type='detect_bottles_action' name='detect_bottles_action' output='screen'>
		<param name="surface_frame" value="$(arg surface_frame)"/>
	</node>

	<node pkg='tams_bartender_recognition' type='detect_glass_action' name='detect_glass_action' output='screen'>
		<param name="glass_tag" value="435"/>
		<param name="glass_id" value="glass"/>
		<param name="surface_frame" value="$(arg surface_frame)"/>
		<param name="camera_frame" value="$(arg camera_frame)"/>

		<!-- glass x/y offset from april tag -->
		<param name="offset_x" value="0.1"/>
		<param name="offset_y" value="0.0"/>
	</node>

	<include file="$(find tams_bartender_recognition)/launch/apriltags2.launch">
		<arg name="image_rect" value="$(arg camera_rgb)/$(arg image_rect_suffix)"/>
		<arg name="camera_info" value="$(arg camera_rgb)/camera_info"/>
		<arg name="camera_frame" value="$(arg camera_frame)"/>
	</include>
</launch>
